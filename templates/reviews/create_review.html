{% extends 'base.html' %}

{% block title %}Write Review - Order #{{ order.order_number }}{% endblock %}

{% block content %}

<section class="py-5">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card shadow">
                    <div class="card-header bg-success text-white">
                        <h4 class="mb-0">
                            <i class="bi bi-star"></i> Write a Review
                        </h4>
                    </div>
                    <div class="card-body p-4">
                        <!-- Order Info -->
                        <div class="alert alert-info mb-4">
                            <strong>Order #{{ order.order_number }}</strong><br>
                            Farmer: {{ order.farmer.username }}
                            {% if order.farmer.farmer_profile %}
                                ({{ order.farmer.farmer_profile.farm_name }})
                            {% endif %}
                        </div>
                        
                        <form method="post" id="reviewForm">
                            {% csrf_token %}
                            
                            <!-- Overall Rating -->
                            <div class="mb-4">
                                <label class="form-label">Overall Rating *</label>
                                <div class="rating-stars">
                                    <input type="radio" name="rating" value="5" id="star5" required>
                                    <label for="star5" title="5 stars">★</label>
                                    
                                    <input type="radio" name="rating" value="4" id="star4">
                                    <label for="star4" title="4 stars">★</label>
                                    
                                    <input type="radio" name="rating" value="3" id="star3">
                                    <label for="star3" title="3 stars">★</label>
                                    
                                    <input type="radio" name="rating" value="2" id="star2">
                                    <label for="star2" title="2 stars">★</label>
                                    
                                    <input type="radio" name="rating" value="1" id="star1">
                                    <label for="star1" title="1 star">★</label>
                                </div>
                            </div>
                            
                            <!-- Comment -->
                            <div class="mb-4">
                                <label class="form-label">Your Review *</label>
                                <textarea 
                                    class="form-control" 
                                    name="comment" 
                                    rows="4"
                                    placeholder="Share your experience with this farmer..."
                                    required
                                ></textarea>
                            </div>
                            
                            <!-- Detailed Ratings -->
                            <h5 class="mb-3">Detailed Ratings</h5>
                            
                            <div class="mb-3">
                                <label class="form-label">Product Quality *</label>
                                <select name="product_quality" class="form-select" required>
                                    <option value="">Select rating...</option>
                                    <option value="5">⭐⭐⭐⭐⭐ Excellent</option>
                                    <option value="4">⭐⭐⭐⭐ Good</option>
                                    <option value="3">⭐⭐⭐ Average</option>
                                    <option value="2">⭐⭐ Below Average</option>
                                    <option value="1">⭐ Poor</option>
                                </select>
                            </div>
                            
                            <div class="mb-3">
                                <label class="form-label">Communication *</label>
                                <select name="communication" class="form-select" required>
                                    <option value="">Select rating...</option>
                                    <option value="5">⭐⭐⭐⭐⭐ Excellent</option>
                                    <option value="4">⭐⭐⭐⭐ Good</option>
                                    <option value="3">⭐⭐⭐ Average</option>
                                    <option value="2">⭐⭐ Below Average</option>
                                    <option value="1">⭐ Poor</option>
                                </select>
                            </div>
                            
                            <div class="mb-3">
                                <label class="form-label">Delivery Speed *</label>
                                <select name="delivery_speed" class="form-select" required>
                                    <option value="">Select rating...</option>
                                    <option value="5">⭐⭐⭐⭐⭐ Excellent</option>
                                    <option value="4">⭐⭐⭐⭐ Good</option>
                                    <option value="3">⭐⭐⭐ Average</option>
                                    <option value="2">⭐⭐ Below Average</option>
                                    <option value="1">⭐ Poor</option>
                                </select>
                            </div>
                            
                            <!-- Would Recommend -->
                            <div class="mb-4">
                                <div class="form-check">
                                    <input 
                                        class="form-check-input" 
                                        type="checkbox" 
                                        name="would_recommend" 
                                        id="recommend"
                                        checked
                                    >
                                    <label class="form-check-label" for="recommend">
                                        I would recommend this farmer to others
                                    </label>
                                </div>
                            </div>
                            
                            <div class="d-grid gap-2">
                                <button type="submit" class="btn btn-success btn-lg">
                                    <i class="bi bi-check-circle"></i> Submit Review
                                </button>
                                <a href="{% url 'orders:order_detail' order.id %}" class="btn btn-outline-secondary">
                                    Cancel
                                </a>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

{% endblock %}

{% block extra_css %}
<style>
    .rating-stars {
        display: flex;
        flex-direction: row-reverse;
        justify-content: flex-end;
        font-size: 3rem;
    }
    
    .rating-stars input {
        display: none;
    }
    
    .rating-stars label {
        color: #ddd;
        cursor: pointer;
        padding: 0 5px;
        transition: color 0.2s;
    }
    
    .rating-stars label:hover,
    .rating-stars label:hover ~ label,
    .rating-stars input:checked ~ label {
        color: #ffc107;
    }
</style>
{% endblock %}